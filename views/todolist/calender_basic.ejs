<!DOCTYPE html>
<html class="loading" lang="en" data-textdirection="ltr">
<!-- BEGIN: Head-->

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="description" content=".">
    <meta name="keywords" content="">
    <meta name="author" content="PING co.">
    <title>일정관리</title>
    <link rel="apple-touch-icon" href="/static/app-assets/images/ico/apple-icon-120.png">
    <link rel="shortcut icon" type="image/x-icon" href="/static/app-assets/images/ico/favicon.ico">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i%7CQuicksand:300,400,500,700" rel="stylesheet">

    <!-- BEGIN: Vendor CSS-->
    <link rel="stylesheet" type="text/css" href="/static/app-assets/vendors/css/vendors.min.css">
    <link rel="stylesheet" type="text/css" href="/static/app-assets/vendors/css/calendars/fullcalendar.min.css">
    <link rel="stylesheet" type="text/css" href="/static/app-assets/vendors/css/calendars/daygrid.min.css">
    <link rel="stylesheet" type="text/css" href="/static/app-assets/vendors/css/calendars/timegrid.min.css">
    <!-- END: Vendor CSS-->

    <!-- BEGIN: Theme CSS-->
    <link rel="stylesheet" type="text/css" href="/static/app-assets/css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="/static/app-assets/css/bootstrap-extended.css">
    <link rel="stylesheet" type="text/css" href="/static/app-assets/css/colors.css">
    <link rel="stylesheet" type="text/css" href="/static/app-assets/css/components.css">
    <!-- END: Theme CSS-->

    <!-- BEGIN: Page CSS-->
    <link rel="stylesheet" type="text/css" href="/static/app-assets/css/core/menu/menu-types/vertical-menu.css">
    <link rel="stylesheet" type="text/css" href="/static/app-assets/css/core/colors/palette-gradient.css">
    <link rel="stylesheet" type="text/css" href="/static/app-assets/css/plugins/calendars/fullcalendar.css">
    <!-- END: Page CSS-->

    <!-- BEGIN: Custom CSS-->
    <link rel="stylesheet" type="text/css" href="/static/assets/css/style.css">
    <!-- END: Custom CSS-->
    <style>
        table {
          width: 100%;
          border-collapse: collapse;
        }
        th, td {
          padding: 8px;
          border: 1px solid #ccc;
          text-align: left;
        }
        th {
          background-color: #f2f2f2;
        }
      </style>
</head>
<!-- END: Head-->

<!-- BEGIN: Body-->

<body class="vertical-layout vertical-menu 2-columns   fixed-navbar" data-open="click" data-menu="vertical-menu" data-col="2-columns">


    <!-- BEGIN: Header-->
    <%- include('../common/header_menu') %>
    <!-- END: Header-->


    <!-- BEGIN: Main Menu-->
    <%- include('../common/main_menu') %>

    <!-- END: Main Menu-->
    <!-- BEGIN: Content-->
    <div class="app-content content">
        <div class="content-overlay"></div>
        <div class="content-wrapper">
            <div class="content-header row">
                <div class="content-header-left col-md-6 col-12 mb-2">
                    <h3 class="content-header-title">일정관리</h3>
                    <div class="row breadcrumbs-top">
                        <div class="breadcrumb-wrapper col-12">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="/">Home</a>
                                </li>                               
                                <li class="breadcrumb-item"><a href="#">일정관리</a>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
                
            </div>
            <div class="content-body">
                <!-- Full calendar basic example section start -->
                <section id="basic-examples">
                    <div class="row">
                        <div class="col-6">
                            <div class="card">
                                <div class="card-header">
                                    <h4 class="card-title">일정관리</h4>
                                    <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                                    
                                </div>
                                <div class="card-content collapse show">
                                    <div class="card-body">
                                        <p class="card-text">1년동안 축사작업일정을 등록하고 관리할수 있습니다.</p>
                                        <div id='fc-default'></div>
                                    </div>
                                </div>
                            </div>
                        </div>                       
                        <div class="col-6">
                            <div class="card">                          
                                <div class="card-content collapse show">                              
                                    <div class="table-responsive">
                                        <table class="table table-bordered mb-0">
                                            <thead>
                                                <tr>
                                                    <th>No</th>
                                                    <th>시작일자</th>
                                                    <th>종료일자</th>
                                                    <th>일정</th>    
                                                    <th>관리</th>                                                                                                 
                                                </tr>
                                            </thead>
                                            <tbody id="tabledata">
                                                <%
                                                    for(var i=0;i<retObject.data.length;i++){
                                                %>
                                                <tr>
                                                    <td><%=retObject.data[i].id%></td>
                                                    <td ><%=retObject.data[i].start%></td>
                                                    <td ><%=retObject.data[i].end%></td>
                                                    <td ><%=retObject.data[i].title%></td>   
                                                    <td>
                                                        <button type="button" class="btn btn-primary mr-1" onclick="deleteSCH('<%=retObject.data[i].id%>')">
                                                            <i class="ft-x"></i> 삭제
                                                        </button>
                                                    </td>                                                                                                  
                                                </tr>
                                                <%}%>
                                                                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="card">     
                                <div class="col-md-4">                  
                                    <div class="form-group">
                                        <label for="weight">날짜</label>
                                        <input type="date" id="start_date" class="form-control" placeholder="" name="start_date">
                                    </div>
                                    <div class="form-group">
                                        <label for="weight">날짜</label>
                                        <input type="date" id="end_date" class="form-control" placeholder="" name="end_date">
                                    </div>
                                              
                                    <div class="form-group">
                                        <label for="weight">일정</label>
                                        <input type="text" id="title" class="form-control" placeholder="" name="title">
                                    </div>
                                </div>
                                <div class="form-actions text-center">
                                    <button type="button" class="btn btn-warning mr-1" onclick="clear()">
                                        <i class="ft-x"></i> clear
                                    </button>
                                    <button type="submit" class="btn btn-primary" onclick="AjaxCalenderInsert();">
                                        <i class="la la-check-square-o"></i> Save
                                    </button>
                                </div>
                            </div>
                        </div>    
                     
                                    
                     
                                        
                    </div>
                   
                </section>
                <!-- // Full calendar basic example section end -->
            </div>
        </div>
    </div>
    <!-- END: Content-->

    <div class="sidenav-overlay"></div>
    <div class="drag-target"></div>


    <!-- BEGIN: Footer-->
    <%- include('../common/footer') %>
    <!-- END: Footer-->


    <!-- BEGIN: Vendor JS-->
    <script src="/static/app-assets/vendors/js/vendors.min.js"></script>
    <!-- BEGIN Vendor JS-->

    <!-- BEGIN: Page Vendor JS-->
    <script src="/static/app-assets/vendors/js/extensions/moment.min.js"></script>
    <script src="/static/app-assets/vendors/js/extensions/fullcalendar.min.js"></script>
    <script src="/static/app-assets/vendors/js/extensions/daygrid.min.js"></script>
    <script src="/static/app-assets/vendors/js/extensions/timegrid.min.js"></script>
    <script src="/static/app-assets/vendors/js/extensions/interactions.min.js"></script>
    <!-- END: Page Vendor JS-->

    <!-- BEGIN: Theme JS-->
    <script src="/static/app-assets/js/core/app-menu.js"></script>
    <script src="/static/app-assets/js/core/app.js"></script>
    <!-- END: Theme JS-->

    <!-- BEGIN: Page JS-->
    <!--<script src="/static/app-assets/js/scripts/extensions/fullcalendar.js"></script>-->
    <!-- END: Page JS-->

</body>
<!-- END: Body-->
<script>  
    function decodeHtmlEntities(str) {
        var doc = new DOMParser().parseFromString(str, 'text/html');
        return doc.documentElement.textContent || doc.documentElement.innerText;
    }
    $(document).ready(function(){
        //alert(decodeHtmlEntities('<%= retObject.str_data %>'));
        var aaa = decodeHtmlEntities('<%= retObject.str_data %>');
        var bbb = JSON.parse(aaa);
        var calendarEl = document.getElementById('fc-default');
        var fcCalendar = new FullCalendar.Calendar(calendarEl, {
            defaultDate: '2024-11-29',
            editable: false,
            plugins: ["dayGrid", "interaction"],
            eventLimit: true, // allow "more" link when too many events
            events: bbb
           
           /*
           events: 
            
            [
                {
                    title: 'All Day Event',
                    start: '2024-11-29'
                },
                {
                    title: '농총진흥청 중간보고',
                    start: '2024-11-26',
                    end: '2024-11-26'
                },
                {
                    id: 999,
                    title: '농총진흥청 중간보고 서류발송',
                    url: 'http://google.com/',
                    start: '2024-11-20'
                },
                {
                    id: 999,
                    title: 'Repeating Event',
                    start: '2016-06-16T16:00:00'
                }
            ]
                */
           
        });

        fcCalendar.render();
    });

</script>


<script>
    function clear(){
         window.location.reload();
    }
    function AjaxCalenderInsert(){
     var sendData = new Object();
         sendData.start = document.getElementById("start_date").value;        
         sendData.end = document.getElementById("end_date").value;        
         sendData.title = document.getElementById("title").value;
         
         //alert(JSON.stringify(sendData));
         // GET 요청을 보낼 URL을 생성합니다.
         
         var url = "/todolist/AjaxCalenderInsert";
         $.ajax({
             url : url
             ,type : "POST"
             ,data : sendData            
             ,success : function(response){ // 성공    
                 //alert(response);
                 if(response.ret == "success"){
                     //alert(JSON.stringify(response))
                     window.location = "/todolist/calender_basic";
                 }else if(response.ret == "fail"){
                    // alert(JSON.stringify(response))
                     window.location = "/todolist/calender_basic";
                 }               
             },
             //요청 실패 시 실행될 콜백 함수 지정
             error : function(xhr, status, error) {
                 console.log("error : " + error + ", status : " + status);
             },
             //요청 완료 시 실행될 콜백 함수 지정
             //요청 성공/실패 여부와 관계없이 무조건 실행
             complete : function(xhr, status) {                
                 console.log("complete");                
             }           
         });
         
    }
 </script>
 <script>
    function deleteSCH(id){
        var sendData = new Object();
         sendData.id = id;
         
         var url = "/todolist/AjaxCalenderDelete";
         $.ajax({
             url : url
             ,type : "POST"
             ,data : sendData            
             ,success : function(response){ // 성공    
                 //alert(response);
                 if(response.ret == "success"){
                     //alert(JSON.stringify(response))
                     window.location = "/todolist/calender_basic";
                 }else if(response.ret == "fail"){
                    // alert(JSON.stringify(response))
                     window.location = "/todolist/calender_basic";
                 }               
             },
             //요청 실패 시 실행될 콜백 함수 지정
             error : function(xhr, status, error) {
                 console.log("error : " + error + ", status : " + status);
             },
             //요청 완료 시 실행될 콜백 함수 지정
             //요청 성공/실패 여부와 관계없이 무조건 실행
             complete : function(xhr, status) {                
                 console.log("complete");                
             }           
         });
     
    }
 </script>
</html>